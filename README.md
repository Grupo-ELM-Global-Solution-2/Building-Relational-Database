# Building-Relational-Database


CREATE TABLE ddd_user(
    id_user NUMBER(5) GENERATED BY DEFAULT AS IDENTITY CONSTRAINT PK_DDD_USER PRIMARY KEY,
    nome VARCHAR2(100) NOT NULL,
    email VARCHAR2(50) NOT NULL UNIQUE,
    senha VARCHAR2(100) NOT NULL
);

CREATE TABLE ddd_trilha(
    id_trilha NUMBER(5) GENERATED BY DEFAULT AS IDENTITY CONSTRAINT PK_DDD_TRILHA PRIMARY KEY,
    nome VARCHAR2(50) NOT NULL,
    dificuldade VARCHAR2(20) NOT NULL CHECK (dificuldade IN ('facil', 'medio', 'dificil')),
    descricao VARCHAR2(100) NOT NULL
);

CREATE TABLE ddd_modulo(
    id_modulo NUMBER(5) GENERATED BY DEFAULT AS IDENTITY CONSTRAINT PK_DDD_MODULO PRIMARY KEY,
    nome VARCHAR2(100) NOT NULL,
    duracao VARCHAR2(10) NOT NULL,
    id_trilha NUMBER(5) NOT NULL,
    CONSTRAINT FK_MODULO_TRILHA FOREIGN KEY (id_trilha) REFERENCES ddd_trilha(id_trilha) ON DELETE CASCADE
);

CREATE TABLE ddd_progresso(
    id_progresso NUMBER(5) GENERATED BY DEFAULT AS IDENTITY CONSTRAINT PK_DDD_PROGRESSO PRIMARY KEY,
    status NUMBER(3) NOT NULL CHECK (status BETWEEN 0 AND 100),
    id_user NUMBER(5) NOT NULL,
    id_modulo NUMBER(5) NOT NULL,
    CONSTRAINT FK_PROGRESSO_USER FOREIGN KEY (id_user) REFERENCES ddd_user(id_user) ON DELETE CASCADE,
    CONSTRAINT FK_PROGRESSO_MODULO FOREIGN KEY (id_modulo) REFERENCES ddd_modulo(id_modulo) ON DELETE CASCADE
);

CREATE TABLE ddd_sugestoes(
    id_sugestoes NUMBER(5) GENERATED BY DEFAULT AS IDENTITY CONSTRAINT PK_DDD_SUGESTOES PRIMARY KEY,
    titulo VARCHAR2(100) NOT NULL,
    tipo VARCHAR2(50) NOT NULL,
    descricao VARCHAR2(100) NOT NULL,
    duracao VARCHAR2(20) NOT NULL,
    dificuldade VARCHAR2(20) NOT NULL CHECK (dificuldade IN ('facil', 'medio', 'dificil')),
    link VARCHAR2(255) NOT NULL
);


CREATE TABLE ddd_trilhas_personalizadas (
    id_trilha_pers NUMBER(5) GENERATED BY DEFAULT AS IDENTITY CONSTRAINT PK_DDD_TRILHA_PERS PRIMARY KEY, 
    id_user NUMBER(5) NOT NULL, 
    data_criacao DATE DEFAULT SYSDATE,
    json_conteudo CLOB,
    CONSTRAINT FK_TRILHA_PERS_USER FOREIGN KEY (id_user) REFERENCES ddd_user (id_user) ON DELETE CASCADE
);

-- √çndices
CREATE INDEX idx_modulo_trilha ON ddd_modulo(id_trilha);
CREATE INDEX idx_trilha_pers_user ON DDD_TRILHAS_PERSONALIZADAS(id_user);
CREATE INDEX idx_progresso_user ON ddd_progresso(id_user);
CREATE INDEX idx_progresso_modulo ON ddd_progresso(id_modulo);

-- Selects
SELECT * FROM ddd_user;
SELECT * FROM ddd_trilha;
SELECT * FROM ddd_modulo;
SELECT * FROM ddd_progresso;
SELECT * FROM ddd_sugestoes;
SELECT * FROM DDD_TRILHAS_PERSONALIZADAS;
